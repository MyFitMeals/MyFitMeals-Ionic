function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1/MI":function(e,t,n){"use strict";n.r(t),n.d(t,"AddRecipePageModule",(function(){return T}));var i=n("ofXK"),r=n("3Pt+"),o=n("TEn/"),a=n("tyNb"),s=n("mrSG"),l=function(e){return e.LOW_CARB="Low Carb",e.VEGETARIAN="V\xe9g\xe9tarien",e.GLUTEN_FREE="Gluten Free",e.NO_SPEC="Aucune sp\xe9cification",e}({});!function(e){e.getValue=function(t){return"Low Carb"===t?e.LOW_CARB:"V\xe9g\xe9tarien"===t?e.VEGETARIAN:"Gluten Free"===t?e.GLUTEN_FREE:"Aucune sp\xe9cification"===t?e.NO_SPEC:void 0}}(l||(l={}));var u=n("BKFT"),b=function(e){return e.CHAUD="Chaud",e.FROID="Froid",e}({});!function(e){e.getValue=function(t){return"Chaud"===t?e.CHAUD:"Froid"===t?e.FROID:void 0}}(b||(b={}));var c=n("fXoL"),p=n("tk/3"),m=n("VHP5"),d=n("lGQG"),g=n("aaed");function f(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){var n=t.$implicit,i=c.Yb();c.zb(2),c.mc(n),c.zb(1),c.bc("value",i.getTemperature(n))}}function h(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){var n=t.$implicit,i=c.Yb();c.zb(2),c.mc(n),c.zb(1),c.bc("value",i.getType(n))}}function v(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){var n=t.$implicit,i=c.Yb();c.zb(2),c.mc(n),c.zb(1),c.bc("value",i.getDiet(n))}}var O,N,y,C=[{path:"",component:(O=function(){function e(t,n,i,o,a,s,l,u){_classCallCheck(this,e),this.http=t,this.popoverController=n,this.toastController=i,this.router=o,this.recipesLoader=a,this.authService=s,this.alertController=l,this.emailComposer=u,this.registerForm=new r.d({name:new r.b("",r.m.required),calories:new r.b("",r.m.required),proteins:new r.b("",r.m.required),fats:new r.b("",r.m.required),carbs:new r.b("",r.m.required),instructions:new r.b("",r.m.required),preparationTime:new r.b("",r.m.required),ingredients:new r.b("",r.m.required),tips:new r.b("",r.m.required)})}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"selectImage",value:function(e){e.target.files.length>0&&(this.images=e.target.files[0])}},{key:"isAdmin",value:function(){return this.authService.isAdmin()}},{key:"sendEmail",value:function(e){var t,n,i,r={to:"Contact.app@myfitmeals.fr",subject:"Proposition de recette",body:"Bonjour MyFitMeals, pouvez-vous ajouter cette recette si possible ? Merci beaucoup !\n\nNom : "+e.get("name").toString()+"\nCalories : "+e.get("calories").toString()+"\nProt\xe9ines : "+e.get("proteins").toString()+"\nLipides : "+e.get("fats").toString()+"\nGlucides : "+e.get("carbs").toString()+"\nInstructions : "+e.get("instructions").toString()+"\nTemps de pr\xe9paration : "+e.get("preparationTime").toString()+"\nIngr\xe9dients : "+e.get("ingredients").toString()+"\nConseils : "+e.get("tips").toString()+"\nTemp\xe9rature : "+(null===(t=e.get("temperature"))||void 0===t?void 0:t.toString())+"\nType : "+(null===(n=e.get("type"))||void 0===n?void 0:n.toString())+"\nDi\xe8te : "+(null===(i=e.get("diet"))||void 0===i?void 0:i.toString())+"\n",isHtml:!0};this.emailComposer.open(r)}},{key:"onSubmit",value:function(){var e=this,t=new FormData;t.append("file",this.images),t.append("name",this.registerForm.value.name),t.append("calories",this.registerForm.value.calories),t.append("proteins",this.registerForm.value.proteins),t.append("fats",this.registerForm.value.fats),t.append("carbs",this.registerForm.value.carbs),t.append("instructions",this.registerForm.value.instructions),t.append("preparationTime",this.registerForm.value.preparationTime),t.append("ingredients",this.registerForm.value.ingredients),t.append("tips",this.registerForm.value.tips),null!=this.temperature&&null!=this.temperature&&t.append("temperature",this.temperature),null!=this.type&&null!=this.type&&t.append("type",this.type),null!=this.diet&&null!=this.diet&&t.append("diet",this.diet),this.isAdmin()?this.http.post("https://myfitmeals.herokuapp.com/recipes/",t).subscribe((function(t){e.presentToast("Recette ajout\xe9e avec succ\xe8s !"),console.log(t),e.recipesLoader.loadRecipes().then((function(t){e.router.navigate(["tabs/tab1"])}))}),(function(t){console.log(t),e.presentToast("Echec d'ajout de la recette... !")})):(this.presentAlert("Votre demande d'ajout a bien \xe9t\xe9 envoy\xe9e. Elle sera trait\xe9e au plus vite par notre \xe9quipe !"),this.sendEmail(t),this.router.navigate(["tabs/tab1"]))}},{key:"presentAlert",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Demande d'ajout ",message:e,buttons:["D'accord"]});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onDidDismiss();case 7:i=t.sent,r=i.role,console.log("onDidDismiss resolved with role",r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"presentToast",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:e,duration:1e3});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"radioGroupChange",value:function(e,t){console.log(e.detail),"Temperature"===t&&(this.temperature=e.detail.value),"Type"===t&&(this.type=e.detail.value),"Diet"===t&&(this.diet=e.detail.value)}},{key:"getTemperature",value:function(e){return console.log(e),"Chaud"===e?b.CHAUD:"Froid"===e?b.FROID:void 0}},{key:"getType",value:function(e){return console.log(e),"Sucr\xe9"===e?u.a.SUCRE:"Sal\xe9"===e?u.a.SALE:void 0}},{key:"getDiet",value:function(e){return l.getValue(e)}},{key:"getAllValuesEnum",value:function(e){return"Type"===e?Object.values(u.a).slice(0,Object.values(u.a).length-1):"Diet"===e?Object.values(l).slice(0,Object.values(l).length-1):"Temperature"===e?Object.values(b).slice(0,Object.values(b).length-1):void 0}}]),e}(),O.\u0275fac=function(e){return new(e||O)(c.Jb(p.b),c.Jb(o.Y),c.Jb(o.db),c.Jb(a.g),c.Jb(m.a),c.Jb(d.a),c.Jb(o.a),c.Jb(g.a))},O.\u0275cmp=c.Db({type:O,selectors:[["app-add-recipe"]],decls:66,vars:4,consts:[["slot","start"],["padding",""],[3,"formGroup"],["position","floating"],["type","text","name","recipeName","formControlName","name"],["type","number","name","calories","formControlName","calories"],["type","number","name","proteins","formControlName","proteins"],["type","number","name","fats","formControlName","fats"],["type","number","name","carbs","formControlName","carbs"],["type","text","name","instructions","formControlName","instructions"],["type","text","name","ingredients","formControlName","ingredients"],["type","number","name","preparationTime","formControlName","preparationTime"],["type","text","name","tips","formControlName","tips"],["allow-empty-selection","true","name","radio-group",3,"ionChange"],[4,"ngFor","ngForOf"],["type","file","name","image",3,"change"],["type","submit",2,"font-size","20px","margin-left","10px",3,"click"],["slot","start",3,"value"]],template:function(e,t){1&e&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-buttons",0),c.Kb(3,"ion-back-button"),c.Nb(),c.Ob(4,"ion-title"),c.lc(5,"Ajouter une recette"),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content",1),c.Ob(7,"form",2),c.Ob(8,"ion-item"),c.Ob(9,"ion-label",3),c.lc(10,"Nom recette"),c.Nb(),c.Kb(11,"ion-input",4),c.Nb(),c.Ob(12,"ion-item"),c.Ob(13,"ion-label",3),c.lc(14,"Calories"),c.Nb(),c.Kb(15,"ion-input",5),c.Nb(),c.Ob(16,"ion-item"),c.Ob(17,"ion-label",3),c.lc(18,"Prot\xe9ines"),c.Nb(),c.Kb(19,"ion-input",6),c.Nb(),c.Ob(20,"ion-item"),c.Ob(21,"ion-label",3),c.lc(22,"Lipides"),c.Nb(),c.Kb(23,"ion-input",7),c.Nb(),c.Ob(24,"ion-item"),c.Ob(25,"ion-label",3),c.lc(26,"Glucides"),c.Nb(),c.Kb(27,"ion-input",8),c.Nb(),c.Ob(28,"ion-item"),c.Ob(29,"ion-label",3),c.lc(30,"Instructions"),c.Nb(),c.Kb(31,"ion-textarea",9),c.Nb(),c.Ob(32,"ion-item"),c.Ob(33,"ion-label",3),c.lc(34,"Ingredients"),c.Nb(),c.Kb(35,"ion-textarea",10),c.Nb(),c.Ob(36,"ion-item"),c.Ob(37,"ion-label",3),c.lc(38,"Temps de pr\xe9paration"),c.Nb(),c.Kb(39,"ion-input",11),c.Nb(),c.Ob(40,"ion-item"),c.Ob(41,"ion-label",3),c.lc(42,"Conseils"),c.Nb(),c.Kb(43,"ion-textarea",12),c.Nb(),c.Ob(44,"ion-list"),c.Ob(45,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Temperature")})),c.Ob(46,"ion-list-header"),c.Ob(47,"ion-label"),c.lc(48,"Plat..."),c.Nb(),c.Nb(),c.jc(49,f,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(50,"ion-list"),c.Ob(51,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Type")})),c.Ob(52,"ion-list-header"),c.Ob(53,"ion-label"),c.lc(54,"Sucr\xe9/Sal\xe9"),c.Nb(),c.Nb(),c.jc(55,h,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(56,"ion-list"),c.Ob(57,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Diet")})),c.Ob(58,"ion-list-header"),c.Ob(59,"ion-label"),c.lc(60,"R\xe9gime/Allergies"),c.Nb(),c.Nb(),c.jc(61,v,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(62,"ion-item"),c.Ob(63,"ion-input",15),c.Wb("change",(function(e){return t.selectImage(e)})),c.Nb(),c.Nb(),c.Ob(64,"ion-button",16),c.Wb("click",(function(){return t.onSubmit()})),c.lc(65,"Ajouter recette"),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.zb(7),c.bc("formGroup",t.registerForm),c.zb(42),c.bc("ngForOf",t.getAllValuesEnum("Temperature")),c.zb(6),c.bc("ngForOf",t.getAllValuesEnum("Type")),c.zb(6),c.bc("ngForOf",t.getAllValuesEnum("Diet")))},directives:[o.r,o.R,o.h,o.d,o.e,o.P,o.n,r.n,r.j,r.e,o.v,o.w,o.u,o.cb,r.i,r.c,o.V,o.O,o.x,o.A,o.bb,o.y,i.h,o.g,o.z,o.Z],styles:[""]}),O)}],w=((y=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:y}),y.\u0275inj=c.Gb({factory:function(e){return new(e||y)},imports:[[a.j.forChild(C)],a.j]}),y),T=((N=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:N}),N.\u0275inj=c.Gb({factory:function(e){return new(e||N)},imports:[[i.b,r.f,o.S,r.l,w]]}),N)}}]);