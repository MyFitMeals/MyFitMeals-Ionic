(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"1/MI":function(e,t,i){"use strict";i.r(t),i.d(t,"AddRecipePageModule",(function(){return C}));var n=i("ofXK"),r=i("3Pt+"),o=i("TEn/"),a=i("tyNb"),s=i("mrSG"),l=function(e){return e.LOW_CARB="Low Carb",e.VEGETARIAN="V\xe9g\xe9tarien",e.GLUTEN_FREE="Gluten Free",e.NO_SPEC="Aucune sp\xe9cification",e}({});!function(e){e.getValue=function(t){return"Low Carb"===t?e.LOW_CARB:"V\xe9g\xe9tarien"===t?e.VEGETARIAN:"Gluten Free"===t?e.GLUTEN_FREE:"Aucune sp\xe9cification"===t?e.NO_SPEC:void 0}}(l||(l={}));var b=i("BKFT"),u=function(e){return e.CHAUD="Chaud",e.FROID="Froid",e}({});!function(e){e.getValue=function(t){return"Chaud"===t?e.CHAUD:"Froid"===t?e.FROID:void 0}}(u||(u={}));var c=i("fXoL"),p=i("tk/3"),m=i("VHP5"),d=i("lGQG"),g=i("aaed");function h(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){const e=t.$implicit,i=c.Yb();c.zb(2),c.mc(e),c.zb(1),c.bc("value",i.getTemperature(e))}}function f(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){const e=t.$implicit,i=c.Yb();c.zb(2),c.mc(e),c.zb(1),c.bc("value",i.getType(e))}}function O(e,t){if(1&e&&(c.Ob(0,"ion-item"),c.Ob(1,"ion-label"),c.lc(2),c.Nb(),c.Kb(3,"ion-radio",17),c.Nb()),2&e){const e=t.$implicit,i=c.Yb();c.zb(2),c.mc(e),c.zb(1),c.bc("value",i.getDiet(e))}}const N=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,s,l){this.http=e,this.popoverController=t,this.toastController=i,this.router=n,this.recipesLoader=o,this.authService=a,this.alertController=s,this.emailComposer=l,this.registerForm=new r.d({name:new r.b("",r.m.required),calories:new r.b("",r.m.required),proteins:new r.b("",r.m.required),fats:new r.b("",r.m.required),carbs:new r.b("",r.m.required),instructions:new r.b("",r.m.required),preparationTime:new r.b("",r.m.required),ingredients:new r.b("",r.m.required),tips:new r.b("",r.m.required)})}ngOnInit(){}selectImage(e){e.target.files.length>0&&(this.images=e.target.files[0])}isAdmin(){return this.authService.isAdmin()}sendEmail(e){var t,i,n;let r={to:"Contact.app@myfitmeals.fr",subject:"Proposition de recette",body:"Bonjour MyFitMeals, pouvez-vous ajouter cette recette si possible ? Merci beaucoup !\n\nNom : "+e.get("name").toString()+"\nCalories : "+e.get("calories").toString()+"\nProt\xe9ines : "+e.get("proteins").toString()+"\nLipides : "+e.get("fats").toString()+"\nGlucides : "+e.get("carbs").toString()+"\nInstructions : "+e.get("instructions").toString()+"\nTemps de pr\xe9paration : "+e.get("preparationTime").toString()+"\nIngr\xe9dients : "+e.get("ingredients").toString()+"\nConseils : "+e.get("tips").toString()+"\nTemp\xe9rature : "+(null===(t=e.get("temperature"))||void 0===t?void 0:t.toString())+"\nType : "+(null===(i=e.get("type"))||void 0===i?void 0:i.toString())+"\nDi\xe8te : "+(null===(n=e.get("diet"))||void 0===n?void 0:n.toString())+"\n",isHtml:!0};this.emailComposer.open(r)}onSubmit(){const e=new FormData;e.append("file",this.images),e.append("name",this.registerForm.value.name),e.append("calories",this.registerForm.value.calories),e.append("proteins",this.registerForm.value.proteins),e.append("fats",this.registerForm.value.fats),e.append("carbs",this.registerForm.value.carbs),e.append("instructions",this.registerForm.value.instructions),e.append("preparationTime",this.registerForm.value.preparationTime),e.append("ingredients",this.registerForm.value.ingredients),e.append("tips",this.registerForm.value.tips),null!=this.temperature&&null!=this.temperature&&e.append("temperature",this.temperature),null!=this.type&&null!=this.type&&e.append("type",this.type),null!=this.diet&&null!=this.diet&&e.append("diet",this.diet),this.isAdmin()?this.http.post("https://myfitmeals.herokuapp.com/recipes/",e).subscribe(e=>{this.presentToast("Recette ajout\xe9e avec succ\xe8s !"),console.log(e),this.recipesLoader.loadRecipes().then(e=>{this.router.navigate(["tabs/tab1"])})},e=>{console.log(e),this.presentToast("Echec d'ajout de la recette... !")}):(this.presentAlert("Votre demande d'ajout a bien \xe9t\xe9 envoy\xe9e. Elle sera trait\xe9e au plus vite par notre \xe9quipe !"),this.sendEmail(e),this.router.navigate(["tabs/tab1"]))}presentAlert(e){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Demande d'ajout ",message:e,buttons:["D'accord"]});yield t.present();const{role:i}=yield t.onDidDismiss();console.log("onDidDismiss resolved with role",i)}))}presentToast(e){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:e,duration:1e3})).present()}))}radioGroupChange(e,t){console.log(e.detail),"Temperature"===t&&(this.temperature=e.detail.value),"Type"===t&&(this.type=e.detail.value),"Diet"===t&&(this.diet=e.detail.value)}getTemperature(e){return console.log(e),"Chaud"===e?u.CHAUD:"Froid"===e?u.FROID:void 0}getType(e){return console.log(e),"Sucr\xe9"===e?b.a.SUCRE:"Sal\xe9"===e?b.a.SALE:void 0}getDiet(e){return l.getValue(e)}getAllValuesEnum(e){return"Type"===e?Object.values(b.a).slice(0,Object.values(b.a).length-1):"Diet"===e?Object.values(l).slice(0,Object.values(l).length-1):"Temperature"===e?Object.values(u).slice(0,Object.values(u).length-1):void 0}}return e.\u0275fac=function(t){return new(t||e)(c.Jb(p.b),c.Jb(o.Y),c.Jb(o.db),c.Jb(a.g),c.Jb(m.a),c.Jb(d.a),c.Jb(o.a),c.Jb(g.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-add-recipe"]],decls:66,vars:4,consts:[["slot","start"],["padding",""],[3,"formGroup"],["position","floating"],["type","text","name","recipeName","formControlName","name"],["type","number","name","calories","formControlName","calories"],["type","number","name","proteins","formControlName","proteins"],["type","number","name","fats","formControlName","fats"],["type","number","name","carbs","formControlName","carbs"],["type","text","name","instructions","formControlName","instructions"],["type","text","name","ingredients","formControlName","ingredients"],["type","number","name","preparationTime","formControlName","preparationTime"],["type","text","name","tips","formControlName","tips"],["allow-empty-selection","true","name","radio-group",3,"ionChange"],[4,"ngFor","ngForOf"],["type","file","name","image",3,"change"],["type","submit",2,"font-size","20px","margin-left","10px",3,"click"],["slot","start",3,"value"]],template:function(e,t){1&e&&(c.Ob(0,"ion-header"),c.Ob(1,"ion-toolbar"),c.Ob(2,"ion-buttons",0),c.Kb(3,"ion-back-button"),c.Nb(),c.Ob(4,"ion-title"),c.lc(5,"Ajouter une recette"),c.Nb(),c.Nb(),c.Nb(),c.Ob(6,"ion-content",1),c.Ob(7,"form",2),c.Ob(8,"ion-item"),c.Ob(9,"ion-label",3),c.lc(10,"Nom recette"),c.Nb(),c.Kb(11,"ion-input",4),c.Nb(),c.Ob(12,"ion-item"),c.Ob(13,"ion-label",3),c.lc(14,"Calories"),c.Nb(),c.Kb(15,"ion-input",5),c.Nb(),c.Ob(16,"ion-item"),c.Ob(17,"ion-label",3),c.lc(18,"Prot\xe9ines"),c.Nb(),c.Kb(19,"ion-input",6),c.Nb(),c.Ob(20,"ion-item"),c.Ob(21,"ion-label",3),c.lc(22,"Lipides"),c.Nb(),c.Kb(23,"ion-input",7),c.Nb(),c.Ob(24,"ion-item"),c.Ob(25,"ion-label",3),c.lc(26,"Glucides"),c.Nb(),c.Kb(27,"ion-input",8),c.Nb(),c.Ob(28,"ion-item"),c.Ob(29,"ion-label",3),c.lc(30,"Instructions"),c.Nb(),c.Kb(31,"ion-textarea",9),c.Nb(),c.Ob(32,"ion-item"),c.Ob(33,"ion-label",3),c.lc(34,"Ingredients"),c.Nb(),c.Kb(35,"ion-textarea",10),c.Nb(),c.Ob(36,"ion-item"),c.Ob(37,"ion-label",3),c.lc(38,"Temps de pr\xe9paration"),c.Nb(),c.Kb(39,"ion-input",11),c.Nb(),c.Ob(40,"ion-item"),c.Ob(41,"ion-label",3),c.lc(42,"Conseils"),c.Nb(),c.Kb(43,"ion-textarea",12),c.Nb(),c.Ob(44,"ion-list"),c.Ob(45,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Temperature")})),c.Ob(46,"ion-list-header"),c.Ob(47,"ion-label"),c.lc(48,"Plat..."),c.Nb(),c.Nb(),c.jc(49,h,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(50,"ion-list"),c.Ob(51,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Type")})),c.Ob(52,"ion-list-header"),c.Ob(53,"ion-label"),c.lc(54,"Sucr\xe9/Sal\xe9"),c.Nb(),c.Nb(),c.jc(55,f,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(56,"ion-list"),c.Ob(57,"ion-radio-group",13),c.Wb("ionChange",(function(e){return t.radioGroupChange(e,"Diet")})),c.Ob(58,"ion-list-header"),c.Ob(59,"ion-label"),c.lc(60,"R\xe9gime/Allergies"),c.Nb(),c.Nb(),c.jc(61,O,4,2,"ion-item",14),c.Nb(),c.Nb(),c.Ob(62,"ion-item"),c.Ob(63,"ion-input",15),c.Wb("change",(function(e){return t.selectImage(e)})),c.Nb(),c.Nb(),c.Ob(64,"ion-button",16),c.Wb("click",(function(){return t.onSubmit()})),c.lc(65,"Ajouter recette"),c.Nb(),c.Nb(),c.Nb()),2&e&&(c.zb(7),c.bc("formGroup",t.registerForm),c.zb(42),c.bc("ngForOf",t.getAllValuesEnum("Temperature")),c.zb(6),c.bc("ngForOf",t.getAllValuesEnum("Type")),c.zb(6),c.bc("ngForOf",t.getAllValuesEnum("Diet")))},directives:[o.r,o.R,o.h,o.d,o.e,o.P,o.n,r.n,r.j,r.e,o.v,o.w,o.u,o.cb,r.i,r.c,o.V,o.O,o.x,o.A,o.bb,o.y,n.h,o.g,o.z,o.Z],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(N)],a.j]}),e})(),C=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(t){return new(t||e)},imports:[[n.b,r.f,o.S,r.l,v]]}),e})()}}]);